Описание макросов используемых в учебном курсе
==============================================

## Общая информация

Макросы подключаются путём указания в начале файла с ассемблерным кодом
_include console.inc_. На самом деле сама реализация макросов лежит в каталоге 
_include_ в файле _io.inc_.

Имя макрокоманды не является служебным именем, поэтому большие и маленькие буквы 
в них различаются, однако для удобства программирования при описании соответствующих
макроопределений иногда объявлены синонимы таких имён, например, 
у имени макрокоманды **gotoxy** есть синонимы **gotoXY** и **GotoXY**.

### ClrScr - макрокоманда очистки окна консоли

Формат: **ClrScr**

Она эквивалентна вызову процедуры **ClrScr** языка _Free Pascal_.
Имеет короткий синоним **Cls**.

### ConsoleTitle - макрокоманда задания заголовка окна консоли

Формат: **ConsoleTitle** _Title_

Эта макрокоманда меняет заголовок консольного окна. Текст заголовка
используется диспетчером задач (процессов) Windows для идентификации
задачи в списке выполняемых приложений.
В качестве параметра может использоваться как непосредственный
операнд-текст, так и адрес текста.

Например:

```assembler
.data
    T  db "Заголовок 'окна' консоли",0
.code
    ConsoleTitle 'Don''t use " symbol !'
    ConsoleTitle offset
```

### outstr, outstrln - Макрокоманда вывода строки текста

Формат: **outstr**[**ln**] _text_

Эта макрокоманда выводит на экран строку текста, определяемую
своим параметром. В качестве параметра может использоваться как
непосредственный операнд-текст, так и адрес текста.

Как и в Паскале, добавление к имени макрокоманды окончания 
_ln_ приводит к переходу после вывода на начало новой строки.

Например:

```assembler
.data
    T db "Hello, ""World"" !",0 ;Текст: Hello, "World" !,0
.code
    outstrln "Привет, мир!"
    outstr   offset T
    mov      eax, offset T
    outstr   eax
    outstrln 'Don''t do that!'
    lea      eax, T[7]
    outstrln eax ;Вывод "World" !
```

Текст может заключаться как в двойные, так и в одинарные кавычки (апострофы).
В строку выводимого текста можно вставлять через запятые 
числовые коды любых символов, например:

```assembler
outstr "Первая строка",13,10,"Новая строка = ",3Eh
```

### inputstr - Макрокоманда ввода строки

Формат: **inputstr** _buf_, _Len_ [,_text_]

Макрокоманда вводит одну строку со стандартного потока ввода.
В качестве первого параметра задаётся адрес буфера для ввода текста,
а в качестве второго параметра (в формате i32, r32 или m32) – максимально допустимая 
длина вводимого текста. В качестве необязательного третьего параметра можно задать 
строку-приглашение ко вводу, формат этого последнего параметра такой же,
как и в макрокоманде **outstr**.

В буфер помещается текст из стандартного потока _stdin_ длиной не более _Len_ или до 
конца введённой строки (без символов конца строки #13 и #10). Текст в буфере будет
заканчиваться нулевым символом, поэтому длина буфера должна быть по крайней мере 
на единицу больше _Len_. Действие этой макрокоманды похоже на ввод строки S 
в языке Free Pascal:

```pascal
var S:string[buf-1];
```
Реальное число введённых символов (без учёта нулевого символа) 
возвращается на регистре EAX, например:

```masm
.data
    Buf db 128 dup (?)
    T   db "Текст не длиннее 127 символов=",0
.code
    inputstr offset Buf, 128, offset T
    outwordln eax,, "Длина введённого текста="
```

### ConsoleMode - Макрокоманда переключения режима ввода

Формат: **ConsoleMode**

Включает и выключает перекодирование вводимого текста между кодировками
cp866/сp1251. По умолчанию режим такой, какой он есть в Windows, обычно cp866.

Например:
```masm
.data
    buf db 128 dup (?)
.code
    inputstr offset Buf,127,"Введите русский текст :"
    outstrln "Введён текст :"
    ConsoleMode ;         Отключить перекодировку в DOS
    outstrln offset Buf
    ConsoleMode ;         Включить перекодировку в DOS
```
